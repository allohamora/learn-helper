# Server Task Generation

This document describes the task types generated by the server (using AI) for the Learn Helper learning system. Each task type is generated dynamically based on the target vocabulary word or phrase.

## Enforcement Model

- Task-generation rules in this document are generation targets enforced primarily through prompts and eval checks.
- The server validates response structure (schema shape) for each task type.
- The server does **not** run full deterministic runtime validation for every linguistic rule in this document before returning tasks.

## Ranking

Each task type is scored from 1 to 10 on seven parameters. Maximum total score is 70.

- **Retrieval Effort** - How hard the brain works to pull the word from memory. Passive reading = low effort. Producing word from scratch = high effort. Higher effort leads to stronger memory traces.
- **Cognitive Load** - Mental strain during the task. Too much (multiple inputs at once) overwhelms working memory. Too little (just staring) causes no learning. Optimal load = focused challenge.
- **Association Building** - Does the task connect the word to other knowledge? Isolated word-definition pairs = weak. Words linked to images, synonyms, contexts, personal experiences = strong network.
- **Feedback Quality** - What happens after an answer? No feedback = learner stays confused. "Correct/wrong" = minimal help. Showing correct answer + explanation + examples = strong learning signal.
- **Spacing Compatibility** - Can the task be repeated over time with growing intervals? One-time tasks fade. Tasks that return days/weeks later at optimal intervals = long-term retention.
- **Engagement Factor** - Does the learner want to continue? Boring repetition = dropout. Progress tracking, variety, achievable challenges = sustained motivation.
- **Transfer Potential** - Will the learner recognize this word when reading a real book or article? Drill-only tasks = weak transfer. Varied real-world contexts = strong transfer.

## Task Types

### 1. Translate English Sentence

**Description**: Students arrange shuffled Ukrainian words to form the correct translation of an English sentence containing the target word/phrase.

**Schema**:

```typescript
{
  id: number;
  sentence: string; // English sentence with target word (max 15 words)
  translation: string; // Ukrainian translation (max 15 words, single spaces, punctuation attached to tokens, sentence case)
}
```

**Notes**:

- **Natural language**: English sentences and Ukrainian translations must sound fluent and authentic.
- **English sentence**: Mid-length, sentence case, and includes the exact target word/phrase (case-insensitive) or a minimal grammatical variant limited to inflection/conjugation of verbs or auxiliaries within the target (e.g., "be going to" -> "is going to"). Do not swap function words such as articles or prepositions.
- **Single sentence only**: Avoid semicolons or colons; do not join two independent clauses.
- **Translation formatting**: Ukrainian translations are max 15 words, sentence case, single-space separated, with punctuation attached to tokens (internal commas allowed; final punctuation attached to the last word).
- **Exact target usage**: If the target includes placeholders like "(sb)" or "(sth)", replace every placeholder with a concrete real word (e.g., "take (sb) out" -> "take her out", "do (sth)" -> "do homework") and keep the rest of the phrase unchanged. Never output literal placeholder text like "sb" or "sth".
- **Unambiguous word order**: The Ukrainian translation must have one clear valid order when shuffled.
- **All words separate**: Pronouns, prepositions, conjunctions, and particles must be separate tokens.
- **Adjective-noun agreement**: Ensure correct gender, number, and case agreement in Ukrainian.

**Examples**:

- **Simple sentence**:
  - Word: "beautiful"
  - Sentence: "The garden is beautiful"
  - Translation: "Сад гарний"
  - Scrambled (in UI): ["Сад", "гарний"]

- **Phrase in context**:
  - Word: "take care of"
  - Sentence: "I take care of my plants"
  - Translation: "Я доглядаю за своїми рослинами"
  - Scrambled: ["доглядаю", "своїми", "Я", "за", "рослинами"]

- **Internal placeholder adaptation**:
  - Word: "take (sb) out"
  - Sentence: "I will take her out tonight."
  - Translation: "Я поведу її гуляти сьогодні ввечері."
  - Scrambled: ["гуляти", "ввечері.", "сьогодні", "Я", "її", "поведу"]

- **Question sentence**:
  - Word: "ready"
  - Sentence: "Are you ready?"
  - Translation: "Ти готовий?"
  - Scrambled: ["готовий?", "Ти"]

**Ranking**:

| Parameter             | Score | Reason                                                |
| --------------------- | ----- | ----------------------------------------------------- |
| Retrieval Effort      | 6     | Must reconstruct target sentence from shuffled words  |
| Cognitive Load        | 7     | Requires sentence parsing and word-order reasoning    |
| Association Building  | 7     | Builds strong cross-language sentence associations    |
| Feedback Quality      | 6     | Clear right/wrong order; no explanation of grammar    |
| Spacing Compatibility | 6     | Effective for repetition; needs variety to stay fresh |
| Engagement Factor     | 7     | Puzzle-like; satisfying when correct                  |
| Transfer Potential    | 8     | Strong practice for syntax and translation flow       |
| **Overall**           | 47/70 |                                                       |

---

### 2. Translate Ukrainian Sentence

**Description**: Students arrange shuffled English words to form the correct translation of a Ukrainian sentence containing the translated target word/phrase.

**Schema**:

```typescript
{
  id: number;
  sentence: string; // Ukrainian sentence with translated target word (max 15 words)
  translation: string; // English translation (max 15 words, single spaces, punctuation attached to tokens, sentence case)
}
```

**Notes**:

- **Natural language**: Ukrainian sentences and English translations must sound fluent and authentic.
- **Ukrainian sentence**: Mid-length, sentence case.
- **Single sentence only**: Avoid semicolons or colons; do not join two independent clauses.
- **English completeness**: Include ALL required articles (a/an/the), prepositions, and auxiliary verbs; use correct verb forms.
- **English sentence**: Mid-length, sentence case, and includes the exact target word/phrase (case-insensitive) or a minimal grammatical variant limited to inflection/conjugation of verbs or auxiliaries within the target (e.g., "be going to" -> "is going to"). Do not swap function words such as articles or prepositions.
- **Exact target usage**: If the target includes placeholders like "(sb)" or "(sth)", replace every placeholder with a concrete real word (e.g., "take (sb) out" -> "take her out", "do (sth)" -> "do homework") and keep the rest of the phrase unchanged. Never output literal placeholder text like "sb" or "sth".
- **Unambiguous word order**: The English translation must have one clear valid order when shuffled.
- **All words separate**: Articles, prepositions, conjunctions, and auxiliaries must be separate tokens.

**Examples**:

- **Simple sentence**:
  - Word: "beautiful"
  - Sentence: "Сад гарний"
  - Translation: "The garden is beautiful"
  - Scrambled (in UI): ["garden", "The", "is", "beautiful"]

- **Articles and prepositions**:
  - Word: "at"
  - Sentence: "Вона в магазині"
  - Translation: "She is at the store"
  - Scrambled: ["the", "at", "She", "is", "store"]

- **Auxiliary verb**:
  - Word: "be going to do"
  - Sentence: "Вони збираються робити домашнє завдання завтра"
  - Translation: "They are going to do homework tomorrow"
  - Scrambled: ["are", "They", "tomorrow", "homework", "to", "going", "do"]

- **Internal placeholder adaptation**:
  - Word: "take (sb) out"
  - Sentence: "Я виведу її сьогодні ввечері."
  - Translation: "I will take her out tonight."
  - Scrambled: ["take", "I", "out", "her", "tonight.", "will"]

**Ranking**:

| Parameter             | Score | Reason                                                |
| --------------------- | ----- | ----------------------------------------------------- |
| Retrieval Effort      | 6     | Must reconstruct target sentence from shuffled words  |
| Cognitive Load        | 7     | Requires grammar and function-word accuracy           |
| Association Building  | 7     | Builds strong cross-language sentence associations    |
| Feedback Quality      | 6     | Clear right/wrong order; no explanation of grammar    |
| Spacing Compatibility | 6     | Effective for repetition; needs variety to stay fresh |
| Engagement Factor     | 7     | Puzzle-like; satisfying when correct                  |
| Transfer Potential    | 8     | Strong practice for syntax and translation flow       |
| **Overall**           | 47/70 |                                                       |

---

## Summary Ranking

| Task Type                    | Score  |
| ---------------------------- | ------ |
| Translate English Sentence   | 47/70  |
| Translate Ukrainian Sentence | 47/70  |
| **Overall**                  | 94/140 |
